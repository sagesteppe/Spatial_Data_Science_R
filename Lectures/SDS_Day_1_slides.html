<!DOCTYPE html>
<html lang="en"><head>
<script src="SDS_Day_1_slides_files/libs/clipboard/clipboard.min.js"></script>
<script src="SDS_Day_1_slides_files/libs/quarto-html/tabby.min.js"></script>
<script src="SDS_Day_1_slides_files/libs/quarto-html/popper.min.js"></script>
<script src="SDS_Day_1_slides_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="SDS_Day_1_slides_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="SDS_Day_1_slides_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="SDS_Day_1_slides_files/libs/quarto-html/quarto-syntax-highlighting-dark-474c6d7e63be50eb6972897072b39b27.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.36">

  <meta name="author" content="Reed Benkendorf">
  <meta name="dcterms.date" content="2024-11-21">
  <title>R Data Science: Spatial Data Science 1</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="SDS_Day_1_slides_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="SDS_Day_1_slides_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #f8f8f2;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #f8f8f2; } /* Normal */
    code span.al { color: #f07178; background-color: #2a0f15; font-weight: bold; } /* Alert */
    code span.an { color: #d4d0ab; } /* Annotation */
    code span.at { color: #00e0e0; } /* Attribute */
    code span.bn { color: #d4d0ab; } /* BaseN */
    code span.bu { color: #abe338; } /* BuiltIn */
    code span.cf { color: #ffa07a; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #abe338; } /* Char */
    code span.cn { color: #ffd700; } /* Constant */
    code span.co { color: #f8f8f2; font-style: italic; } /* Comment */
    code span.cv { color: #ffd700; } /* CommentVar */
    code span.do { color: #f8f8f2; } /* Documentation */
    code span.dt { color: #ffa07a; } /* DataType */
    code span.dv { color: #d4d0ab; } /* DecVal */
    code span.er { color: #f07178; text-decoration: underline; } /* Error */
    code span.ex { color: #00e0e0; font-weight: bold; } /* Extension */
    code span.fl { color: #d4d0ab; } /* Float */
    code span.fu { color: #ffa07a; } /* Function */
    code span.im { color: #abe338; } /* Import */
    code span.in { color: #d4d0ab; } /* Information */
    code span.kw { color: #ffa07a; font-weight: bold; } /* Keyword */
    code span.op { color: #ffa07a; } /* Operator */
    code span.ot { color: #00e0e0; } /* Other */
    code span.pp { color: #dcc6e0; } /* Preprocessor */
    code span.re { color: #00e0e0; background-color: #f8f8f2; } /* RegionMarker */
    code span.sc { color: #abe338; } /* SpecialChar */
    code span.ss { color: #abe338; } /* SpecialString */
    code span.st { color: #abe338; } /* String */
    code span.va { color: #00e0e0; } /* Variable */
    code span.vs { color: #abe338; } /* VerbatimString */
    code span.wa { color: #dcc6e0; } /* Warning */
  </style>
  <link rel="stylesheet" href="SDS_Day_1_slides_files/libs/revealjs/dist/theme/quarto-5b48f34d633aed70c74c672477009ffc.css">
  <link rel="stylesheet" href="custom.css">
  <link href="SDS_Day_1_slides_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="SDS_Day_1_slides_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="SDS_Day_1_slides_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="SDS_Day_1_slides_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="SDS_Day_1_slides_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="SDS_Day_1_slides_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <style>
  #title-slide .title {
    font-size: 1.5em;
  }
  #image tags .center {
    text-align: center;
    font-size: 4em;
    font-color: cbc4c3;
  }
  </style>
</head>
<body class="quarto-dark">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">R Data Science: Spatial Data Science 1</h1>
  <p class="subtitle">Northwestern University</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Reed Benkendorf 
</div>
</div>
</div>

  <p class="date">November 21, 2024</p>
</section>
<section id="section" class="slide level2" data-background-image="../pictures/Sacramento_Mtns_NM.jpg">
<h2></h2>
<p>Assigned Reading: Geocomputation with R Chapter 2.</p>
</section>
<section>
<section id="what-is-a-geographic-information-system" class="title-slide slide level1 center">
<h1>What is a Geographic Information System?</h1>

</section>
<section id="what-is-a-gis" class="slide level2">
<h2>What is a GIS</h2>
<div style="float: left; width: 70%;">
<ul>
<li><strong>G</strong>eographic <strong>I</strong>nformation <strong>S</strong>ystem is a system for producing, managing, displaying, and analyzing geographic information.</li>
<li><em>Spatial Data Science</em> is an emergent field which utilizes data science approaches in a <strong>GIS</strong>, and is a natural extension of a <strong>GIS</strong></li>
</ul>
</div>
<div style="float: right; width: 30%; font-size: 0.8em; color: #cbc4c3; text-align: center;">
<div class="quarto-figure quarto-figure-right">
<figure>
<p><img data-src="../pictures/USGS_GIS_Anne_Sexton.jpg" height="550"></p>
<figcaption>A GIS (Anne Sexton)</figcaption>
</figure>
</div>
</div>
</section>
<section id="a-brief-history" class="slide level2">
<h2>A Brief History</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div>
<ul>
<li class="fragment">1854 Cholera outbreak in Soho London kills 616 people</li>
<li class="fragment">Dr.&nbsp;John Snow used both <em>maps</em> and <em>statistics</em> to identify the source (water pumps) and stop the outbreak.</li>
<li class="fragment">foundation of both Epidemiology &amp; GIS.</li>
</ul>
</div>
</div><div style="float: right; width: 40%; font-size: 0.8em; color: #cbc4c3; text-align: center;">
<div class="quarto-figure quarto-figure-right">
<figure>
<p><img data-src="../pictures/John_Snow_Cholera_by_National_Geographic.jpg" width="500"></p>
<figcaption>The Broad Street Pump, A Cholera Outbreak in London. (John Snow)</figcaption>
</figure>
</div>
</div>
</div>
<div>
<ul>
<li class="fragment">Took until the 1990s, when compute power become strongrer, for GIS to flourish.<br>
</li>
</ul>
</div>
</section>
<section id="what-is-spatial-data-science" class="slide level2">
<h2>What is Spatial Data Science?</h2>
<div class="fragment">
<p>GIS has always had big data…</p>
</div>
<p><br></p>
<div class="fragment">
<p>geographic insights, and geospatial analyses <em>to</em> big tabular data sets<br>
Including spatial terms in statistical models</p>
<p><br></p>
<p>Advanced statistics ML, and exploratory processes to develop hypotheses<br>
Feature engineering of spatial products</p>
</div>
</section>
<section id="why-use-r-as-a-gis-and-for-spatial-data-science" class="slide level2">
<h2>Why use R as a GIS and for Spatial Data Science ?</h2>
<div>
<ul>
<li class="fragment">Work Flow Automation</li>
<li class="fragment">Rich Ecosystem (packages, functions, code-sharing, etc.)</li>
<li class="fragment">Reproducible</li>
<li class="fragment">Self Documenting</li>
<li class="fragment">Computationally Efficient</li>
<li class="fragment">Parallel Processing/HPC interfaces</li>
</ul>
</div>
</section>
<section id="why-use-rstudio-as-an-ide" class="slide level2">
<h2>Why use RStudio as an IDE</h2>
<div>
<ul>
<li class="fragment">the rich ecosystem of geospatial tools extends beyond R!</li>
<li class="fragment">can use (and document) shell scripts used to download and pre-process data<br>
</li>
<li class="fragment">can integrate with python</li>
<li class="fragment">can even save and document code used in other GIS systems (e.g.&nbsp;GRASS)</li>
<li class="fragment">tie together with rmarkdown! ;-)</li>
</ul>
</div>
</section></section>
<section>
<section id="geodesy" class="title-slide slide level1 center">
<h1>Geodesy</h1>
<blockquote>
<p><em>‘Geodesy is the science of accurately measuring and understanding the Earth’s geometric shape, orientation in space, and gravity field.’</em> - NOAA</p>
</blockquote>
</section>
<section id="earth-is-not-a-perfect-sphere" class="slide level2">
<h2>Earth is not a <strong>perfect</strong> sphere</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Circumference at equator: 40,075 km (24,901 mi)</li>
<li>Circumference along meridians: 40,009 km (24,860 mi)</li>
<li>Certain areas depressed (e.g.&nbsp;Indian Ocean) others raised (e.g.&nbsp;Europe)</li>
</ul>
</div><div style="float: right; width: 50%; font-size: 0.8em; color: #cbc4c3; text-align: center;">
<div class="quarto-figure quarto-figure-right">
<figure>
<p><img data-src="../pictures/NASA_Blue-Marble_2012_Suomi_NPP.jpg" width="1000"></p>
<figcaption>Blue Marble 2012 (Suomi NPP)</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="the-earth-can-be-represented-as-an-ellipsoid" class="slide level2">
<h2>The Earth can be represented as an Ellipsoid</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>A simple 3d geometric shape</li>
<li>An ellipsoid is a slightly to greatly ovaliform shape</li>
</ul>
</div><div class="column" style="width:50%;">
<ul>
<li>Modeling the Earth as an ellipsoid increases the accuracy of point locations</li>
</ul>
</div><div style="float: center; width: 100%; font-size: 0.8em; color: #cbc4c3; text-align: center;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="../pictures/Spheroids.png" style="width:50.0%"></p>
<figcaption>Ellipsoids</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="however-the-earths-surface-is-not-smooth---geoid" class="slide level2">
<h2>However, the Earth’s surface is not smooth - Geoid</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Types of models to represent planet Earth<br>
</li>
<li>Include gravity, excluding winds and tides<br>
</li>
<li>Very accurate since GPS<br>
</li>
</ul>
</div><div style="float: right; width: 50%; font-size: 0.8em; color: #cbc4c3; text-align: center;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="../pictures/geoid_cross_section.png" class="quarto-figure quarto-figure-center" style="width:35.0%"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="../pictures/Geoid_undulation_10k_ICGEM.jpg" class="quarto-figure quarto-figure-center" style="width:35.0%"></p>
</figure>
</div>
</div>
</div>
<p>Geoid Cross Section &amp; IGCM Geoid</p>
</div>
</div>
</section>
<section id="geodetic-datums" class="slide level2">
<h2>Geodetic Datums</h2>
<div class="columns">
<div class="column" style="width:70%;">
<div>
<p><font size="5"> - Reference frame established to represent locations within the frame.<br>
- Historically these were locally focused and based on Geoids.<br>
- either horizontal (X &amp; Y) or vertical (Z) features.</font></p><font size="5">
<ul>
<li class="fragment">Components:
<ul>
<li class="fragment">reference ellipsoid or geoid<br>
</li>
<li class="fragment">origin point (from which measurements run)<br>
</li>
<li class="fragment">control points very strictly measured from the origin,</li>
</ul></li>
</ul>
</font><p><font size="5">Other locations are then measured in relation to the control points.<br>
</font></p>
</div>
</div><div style="float: right; width: 30%; font-size: 0.8em; color: #cbc4c3; text-align: center;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="../pictures/Number_One_City_Datum_Cosmo1976.jpg" style="width:50.0%"></p>
<figcaption>Number one City Datum (Cosmo1976)</figcaption>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="SDS_Day_1_slides_files/figure-revealjs/Map%20of%20Chicago%20Datum-1.png" style="width:75.0%"></p>
<figcaption>Control Points Number one City Datum</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="geodetic-coordinates" class="slide level2">
<h2>Geodetic Coordinates</h2>
<p><font size="5"> &gt; “The geodetic (or geographic) latitude is the angle between the equatorial plane and the normal (vertical) to the ellipsoid surface at the considered point.” - Proj </font></p>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li>phi = geodetic latitude (north/south)</li>
<li>lambda =longitude (east/west)</li>
<li><em>h</em> = ellipsoidal height</li>
<li>N = Normal (plane at right angle to the ellipsoid surface)</li>
</ul>
</div><div style="float: right; width: 40%; font-size: 0.8em; color: #cbc4c3; text-align: center;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="../pictures/Geodetic_Coordinates1_Peter_Mercator.png" style="width:50.0%"></p>
<figcaption>Angles on Ellipsoid and Geodetic Coordinates (Peter Mercator)</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="../pictures/geodetic_coordinates_Peter_Mercator.png" style="width:50.0%"></p>
<figcaption>Angles on Ellipsoid and Geodetic Coordinates (Peter Mercator)</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="coordinate-notation---trigonometric" class="slide level2">
<h2>Coordinate Notation - Trigonometric</h2>
<ul>
<li>Trigonometric
<ul>
<li>Degrees Minutes Seconds (DMS), e.g.&nbsp;42°03’27.7” N
<ul>
<li>Sexagesimal/base 60 (think: minutes in an hour)</li>
</ul></li>
<li>Decimal Degrees (DD), e.g.&nbsp;42.05759 N
<ul>
<li>Decimal Fractions of a Degree (portion of 360/2)</li>
</ul></li>
</ul></li>
<li>DMS; seldom used in digital formats<br>
</li>
<li>DD; almost exclusively used</li>
</ul>
</section>
<section id="coordinate-notation---conversion" class="slide level2">
<h2>Coordinate Notation - Conversion</h2>
<p><span class="math display">\[
\text{Latitude of Tech} =  42°03'27.7" N
\]</span></p>
<p><font size="5"> Convert the latitude of the tech building from DMS to DD</font></p><font size="5">
<p><span class="math display">\[
\text{Decimal Degrees} = \text{Degrees } + \frac{\text{Minutes}}{60} + \frac{\text{Seconds}}{3600}
\]</span></p>
<div class="scrolling">
<details>
<summary>
Workflow
</summary>
<p><span class="math display">\[
42 + (\frac{03'}{60}) + (\frac{27.7"}{3600})
\]</span></p>
<span class="math display">\[
42 + 0.05 + 0.007694 = 42.05759 \text{N Decimal Degrees}
\]</span>
</details>
</div>
</font><p><font size="5"></font></p>
</section>
<section id="coordinate-notation---utm" class="slide level2">
<h2>Coordinate Notation - UTM</h2>
<div class="columns">
<div class="column" style="width:70%;">
<ul>
<li>Universal Transverse Mercator
<ul>
<li>Divides the world into 60 zones</li>
<li>Flattens each zone</li>
<li>Measures distances in Meters</li>
</ul></li>
</ul>
</div><div class="column" style="width:30%;">
<p>Common for field work, planar measurements of meters.</p>
</div></div>
<div style="float: center; width: 100%; font-size: 0.8em; color: #cbc4c3; text-align: center;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="SDS_Day_1_slides_files/figure-revealjs/UTM%20Zones%20of%20the%20Continental%20USA-1.png" style="width:45.0%"></p>
<figcaption>UTM Zones of the Conterminous USA (ESRI)</figcaption>
</figure>
</div>
</div>
</div>

</div>
</section>
<section id="coordinate-reference-system-crs" class="slide level2">
<h2>Coordinate Reference System (CRS)</h2>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li>System for specifying a location on Earth’s surface</li>
<li>Composed of:
<ul>
<li>a model of earths shape (<em>Geoid</em> or Ellipsoid)</li>
<li>geodetic <em>datum</em></li>
<li>generally also a <em>projection</em></li>
</ul></li>
</ul>
</div><div style="float: right; width: 40%; font-size: 0.8em; color: #cbc4c3; text-align: center;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="../pictures/Geographic_Coordinate_Reference_System.jpg" style="width:100.0%"></p>
<figcaption>Geographic CRS (A. Krystalli)</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="problems-with-working-on-flat-surfaces" class="slide level2">
<h2>Problems with working on flat surfaces</h2>
<p>Going from three to two dimensions does not work well. But we have worked around this. <em>sort of</em></p>
<center>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="../pictures/Orange_peel_Nathan_Belz.png" style="width:75.0%"></p>
<figcaption>Orange Peel (N. Belz)</figcaption>
</figure>
</div>
</div>
</div>
</center>
</section>
<section id="geographic-projected-coordinate-system" class="slide level2">
<h2>Geographic &amp; Projected Coordinate System</h2>
<ul>
<li>Geographic: location on a three-dimensional model of Earths Surface</li>
<li>Projected: location on a two-dimensional model of Earths Surface</li>
</ul>
</section>
<section id="major-map-projections-i" class="slide level2">
<h2>Major Map Projections I</h2>
<ul>
<li>Thousands of projections for maps. None are perfect.</li>
<li>There are three main types of projections</li>
</ul>
<p><font size="5"></font></p><font size="5">
<table class="caption-top">
<colgroup>
<col style="width: 15%">
<col style="width: 19%">
<col style="width: 32%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>Type</th>
<th>Examples</th>
<th>Pros</th>
<th>Cons</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Equal Area</td>
<td>Lambert Cylindrical</td>
<td>No distortion of area near equator</td>
<td>Distorts area near the Poles</td>
</tr>
<tr class="even">
<td>Equal Distance</td>
<td>Equi-rectangular</td>
<td>Looks good in mapping applications</td>
<td>Distorts both shape and directions</td>
</tr>
<tr class="odd">
<td>Conformal</td>
<td>Mercator</td>
<td>Boundaries are accurate</td>
<td>Distorts area near the Poles</td>
</tr>
<tr class="even">
<td>Compromise</td>
<td></td>
<td>Sensitive to area and direction</td>
<td>Sensitive to area and direction</td>
</tr>
</tbody>
</table>
</font><p><font size="5"></font></p>
</section>
<section id="major-map-projections-ii" class="slide level2">
<h2>Major Map Projections II</h2>
<div style="float: center; width: 100%; font-size: 0.8em; color: #cbc4c3; text-align: center;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="../pictures/Projection_Maps.png" style="width:100.0%"></p>
<figcaption>Map Projections (D. Strebe)</figcaption>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="geodesy-takeaways" class="slide level2">
<h2>Geodesy Takeaways</h2>
<div>
<p><font size="5"> - There are various models (geoids &amp; ellipsoids) to represent the shape of the earth<br>
- Different datums are used to represent different parts of the earth. This is in part due to legacy effects.<br>
- You will almost always use WGS 84 (based on a ellipsoid – which is fit through a special model of earths gravitational fields a geoid) NAD83 (based on a ellipsoid) for a geographic coordinate system. These +/-1 m from each other across much of North America. More useful than a geoid.<br>
- You will usually want to use a UTM grid based on WGS for or State Planes based on NAD83 for projections.<br>
- Different coordinates notation systems are used, focus on Decimal degrees.<br>
</font></p>
</div>
</section></section>
<section>
<section id="geographic-data-models" class="title-slide slide level1 center">
<h1>Geographic Data Models</h1>
<ul>
<li><strong>Vector Data Model</strong> represents discrete features on the planet using geometries such as: points, lines, and polygons.</li>
<li><strong>Raster Data Model</strong> represents (usually) continuous features on the plant using continuous surfaces, like a tile.</li>
</ul>
<p>Vector data tends to only include features of interest, e.g.&nbsp;bodies of water; whereas a Raster will include, <strong>explicitly</strong>, the absence of features (e.g.&nbsp;both water and terrestrial areas).</p>
</section>
<section id="geographic-data-models-1" class="slide level2">
<h2>Geographic Data Models</h2>
<div style="float: center; width: 100%; font-size: 0.8em; color: #cbc4c3; text-align: center;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="../pictures/vector_raster.png" style="width:85.0%"></p>
<figcaption>Vector and Raster Data Models</figcaption>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="vector-data-in-r" class="slide level2">
<h2>Vector Data in R</h2>
<ul>
<li><strong>Vector Data Model</strong> represents discrete features on the planet using geometries such as: points, lines, and polygons.</li>
</ul>
</section>
<section id="simple-features---standards" class="slide level2">
<h2>Simple Features - Standards</h2>
<ul>
<li>Open Geospatial Consortium ISO 19125-1:2004: adhered to in ESRI, and GDAL.</li>
<li>Features have <em>geometries</em> describing their location, and properties described by <em>attributes.</em></li>
<li>Polygons are composed of points, connected by straight lines.</li>
<li>Lines composing polygons cannot intersect</li>
</ul>
</section>
<section id="simple-features-sf-1---attributes" class="slide level2">
<h2>Simple Features (sf) 1 - Attributes</h2>
<ul>
<li>Attributes of the feature, theoretically devoid of spatial context.</li>
<li>Described in text, numbers, stored in a data frame type object.</li>
<li>Essentially the fields of a data frame</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: left;">TAXON</th>
<th style="text-align: right;">DBH</th>
<th style="text-align: right;">HEIGHT</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Robinia pseudoacacia</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">24</td>
</tr>
<tr class="even">
<td style="text-align: left;">Quercus alba</td>
<td style="text-align: right;">32</td>
<td style="text-align: right;">21</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="sf-2---coordinates-form-a-point" class="slide level2">
<h2>sf 2 - Coordinates form a Point</h2>
<ul>
<li><p>all geometries are composed of points.</p></li>
<li><p>points only require two coordinates, X &amp; Y.</p></li>
<li><p>Y = Latitude (necessary), X = Longitude (necessary)<br>
</p></li>
<li><p>Z = Elevation/Depth (somewhat uncommon)<br>
</p></li>
<li><p>M = Time or Uncertainty of Measurement (rather uncommon)</p></li>
</ul>

<img data-src="SDS_Day_1_slides_files/figure-revealjs/sf%202%20-%20Coordinates%20form%20a%20Point-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:75.0%"></section>
<section id="sf-3---points-areform-a-sf-geometry-sfgs" class="slide level2">
<h2>sf 3 - Points are/form a SF Geometry (sfg’s)</h2>
<ul>
<li><p>SFG is the spatial topology associated with a feature</p></li>
<li><p>POINT - A true dimensionless 1 dimensional point</p></li>
<li><p>LINESTRING - Sequence of points connected by strings.</p></li>
<li><p>POLYGON - Sequence of points connected by strings, which close upon themselves.</p></li>
<li><p>i.e.&nbsp;the first and last point of the polygon are the same.</p></li>
</ul>

<img data-src="SDS_Day_1_slides_files/figure-revealjs/sf%203%20-%20Points%20are/form%20a%20SF%20Geometry%20(sfg)-1.png" width="960" class="r-stretch"></section>
<section id="sf-4---combining-geometries-sfgs" class="slide level2">
<h2>sf 4 - combining geometries (sfg’s)</h2>
<ul>
<li>Two or more Points, and sets of Linestring, and polygons can be the geometries of a single feature</li>
<li>Multi(POINT), multi(LINESTRING), multi(POLYGON) - Forming collections of geometries</li>
<li>GEOMETRYCOLLECTION - A mixed set of these three or more geometries in the same geometry</li>
</ul>

<img data-src="SDS_Day_1_slides_files/figure-revealjs/sf%204%20-%20Geometries%20can%20form%20Geometries%20(sfg)-1.png" width="960" class="r-stretch"></section>
<section id="sf-5---geometries-and-spatial-information-form-a-collection-sfc" class="slide level2">
<h2>sf 5 - Geometries and Spatial Information form a Collection (sfc)</h2>
<ul>
<li><p>A list column of S3 type containing certain parameters regarding the Geometry/Geometries</p></li>
<li><p>Coordinate Reference System (‘crs’)</p></li>
<li><p>Precision (‘precision’)</p></li>
<li><p>Bounding box (‘bbox’)</p></li>
<li><p>Number Empty (‘n_empty’)</p></li>
</ul>
<p>Wherein precision refers to the precision of the coordinates forming the geometries. the bbox is a rectangle which includes all pairs of coordinates in the geometry. N_empty, denotes whether the geometry is missing coordinates in a position.</p>
</section>
<section id="sf-6---recapped" class="slide level2">
<h2>sf 6 - Recapped</h2>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top">
<colgroup>
<col style="width: 26%">
<col style="width: 5%">
<col style="width: 8%">
<col style="width: 12%">
<col style="width: 11%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">TAXON</th>
<th style="text-align: right;">DBH</th>
<th style="text-align: right;">HEIGHT</th>
<th style="text-align: right;">LONG</th>
<th style="text-align: right;">LAT</th>
<th style="text-align: left;">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Robinia pseudoacacia</td>
<td style="text-align: right;">40</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">-87.67607</td>
<td style="text-align: right;">42.05663</td>
<td style="text-align: left;">POINT (-87.67607 42.05663)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Quercus alba</td>
<td style="text-align: right;">32</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">-87.67399</td>
<td style="text-align: right;">42.05715</td>
<td style="text-align: left;">POINT (-87.67399 42.05715)</td>
</tr>
</tbody>
</table>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Geometry set for 1 feature 
Geometry type: POINT
Dimension:     XY
Bounding box:  xmin: -87.67607 ymin: 42.05663 xmax: -87.67607 ymax: 42.05663
Geodetic CRS:  WGS 84
Precision:     2 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>sfc_POINT of length 1; first list element:  'XY' num [1:2] -87.7 42.1</code></pre>
</div>
</div>
<ul>
<li>We now finally have <em>both</em> attributes and coordinates which are forming a point geometry.</li>
<li>This is a Simple Feature.</li>
</ul>
</section></section>
<section id="sp" class="title-slide slide level1 center">
<h1>sp</h1>
<ul>
<li>Predecessor to the ‘sf’ R package<br>
</li>
<li>Some spatial statistics programs still only take sp objects as input<br>
</li>
<li>A good introduction to S4 objects; popular in new spatial packages too!</li>
</ul>
</section>

<section>
<section id="sp---history" class="title-slide slide level1 center">
<h1>sp - History</h1>
<ul>
<li><p>Released in 2005</p></li>
<li><p>First package to hold all major vector types of geometries<br>
</p></li>
<li><p>Unified spatial class allowed for support in many spatial statistics packages<br>
</p></li>
<li><p>Improved mapping of spatial objects</p></li>
<li><p>Formed the centerpiece of spatial statistics in R for over a dozen years.</p></li>
</ul>
</section>
<section id="sp---spatial-classes-for-topology" class="slide level2">
<h2>sp - Spatial Classes for Topology</h2>
<ul>
<li><p>SF holds different geometries in list columns, SP has <em>many</em> different types of objects/classes for holding geometries.</p></li>
<li><p>Spatial(Multi)Points<br>
</p></li>
<li><p>Spatial(Multi)Lines<br>
</p></li>
<li><p>Spatial(Multi)Polygons<br>
</p></li>
<li><p>Spatial(Multi)Grids</p></li>
</ul>
</section>
<section id="sp---structures-of-the-spatial-class---topology-only" class="slide level2">
<h2>sp - Structures of The Spatial* Class - Topology Only</h2>
<ul>
<li><p>Less information than SF (‘n_missing’ and ‘precision’ both lacking)</p></li>
<li><p>Bounding box</p></li>
<li><p>Coordinate Reference System</p></li>
<li><p>…Coordinates!</p></li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Formal class 'SpatialPoints' [package "sp"] with 3 slots
  ..@ coords     : num [1:15, 1:2] 0.95 0.77 0.48 0.22 0.32 0.03 0.13 0.31 0.03 0.42 ...
  .. ..- attr(*, "dimnames")=List of 2
  .. .. ..$ : NULL
  .. .. ..$ : chr [1:2] "xc" "yc"
  ..@ bbox       : num [1:2, 1:2] 0.03 0.35 0.95 1.82
  .. ..- attr(*, "dimnames")=List of 2
  .. .. ..$ : chr [1:2] "xc" "yc"
  .. .. ..$ : chr [1:2] "min" "max"
  ..@ proj4string:Formal class 'CRS' [package "sp"] with 1 slot
  .. .. ..@ projargs: chr NA</code></pre>
</div>
</div>
</section>
<section id="sp---attributes---dataframe" class="slide level2">
<h2>sp - Attributes - DataFrame</h2>
<ul>
<li><p>Attachment of attributes, in a data frame, to a Spatial topology can create:</p></li>
<li><p>SpatialPointsDataFrame</p></li>
<li><p>SpatialLinesDataFrame</p></li>
<li><p>SpatialPolgonsDataFrame</p></li>
<li><p>SpatialGridsDataFrame</p></li>
<li><p>Each S*DF is accessed the same way:</p>
<ul>
<li>SPDF@data[[‘col_name’]]</li>
<li>SPDF$‘col_name’</li>
</ul></li>
</ul>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Formal class 'SpatialPointsDataFrame' [package "sp"] with 5 slots
  ..@ data       :'data.frame': 15 obs. of  2 variables:
  .. ..$ temperature: num [1:15] 4.36 4.7 4.82 4.73 5 3.64 4.43 5.02 5.88 4.36 ...
  .. ..$ aspect     : int [1:15] 15 2 3 34 45 37 9 35 33 39 ...
  ..@ coords.nrs : num(0) 
  ..@ coords     : num [1:15, 1:2] 0.95 0.77 0.48 0.22 0.32 0.03 0.13 0.31 0.03 0.42 ...
  .. ..- attr(*, "dimnames")=List of 2
  .. .. ..$ : NULL
  .. .. ..$ : chr [1:2] "xc" "yc"
  ..@ bbox       : num [1:2, 1:2] 0.03 0.35 0.95 1.82
  .. ..- attr(*, "dimnames")=List of 2
  .. .. ..$ : chr [1:2] "xc" "yc"
  .. .. ..$ : chr [1:2] "min" "max"
  ..@ proj4string:Formal class 'CRS' [package "sp"] with 1 slot
  .. .. ..@ projargs: chr NA</code></pre>
</div>
<div class="cell-output-display">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: right;">temperature</th>
<th style="text-align: right;">aspect</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">4.36</td>
<td style="text-align: right;">15</td>
</tr>
<tr class="even">
<td style="text-align: right;">4.70</td>
<td style="text-align: right;">2</td>
</tr>
<tr class="odd">
<td style="text-align: right;">4.82</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="even">
<td style="text-align: right;">4.73</td>
<td style="text-align: right;">34</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5.00</td>
<td style="text-align: right;">45</td>
</tr>
<tr class="even">
<td style="text-align: right;">3.64</td>
<td style="text-align: right;">37</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>We see here that SF contains all of the spatial information in a Simple Feature Collection which can be tidily tucked away in the geometry list column, in SP the analogue to the SFC is the object itself.</p>
<p>SP is mostly geometry with a data slot, SF is mostly data frame with a geometry column.</p>
</section>
<section id="sp-overview-of-a-spatialdataframe" class="slide level2">
<h2>sp Overview of a Spatial*DataFrame</h2>

<img data-src="SDS_Day_1_slides_files/figure-revealjs/Creat%20some%20Spatial%20Classes-1.png" width="960" class="r-stretch"><ul>
<li>Data frame is held in a different slot from the geometry and topology</li>
<li>Data frame columns may be subset</li>
<li>Data frame columns accessed via object@data[[‘colname’]] indexing</li>
</ul>
</section>
<section id="sp---recapped." class="slide level2">
<h2>sp - Recapped.</h2>
<ul>
<li>If you need to use spatial statistics, you will come across these objects.</li>
<li>Don’t sweat them <strong>too</strong> much; you can always convert from and to sf to run certain analyses</li>
</ul>
</section></section>
<section>
<section id="raster-data-in-r" class="title-slide slide level1 center">
<h1>Raster data in R</h1>
<ul>
<li>Rasters are used to represent (continuous) features on the planet using grids<br>
</li>
<li>Excellent format for storing and sharing data<br>
</li>
<li>Divides space into continuous grids<br>
</li>
<li>Raster data sets are often distributed in adjoining <em>tiles</em></li>
</ul>

<img data-src="../pictures/Western_Plant_Predictors.png" style="width:75.0%" class="r-stretch quarto-figure-center"><p class="caption">Western Plant Predictors. Note each cell is the extent of a single raster tile, each tile contains cells.</p></section>
<section id="raster-components" class="slide level2">
<h2>Raster Components</h2>
<ul>
<li>Bounding Coordinate(s)</li>
<li>Cell Resolution (Size of cell)</li>
<li>Dimensions (No of cells in rows and columns)</li>
<li>Coordinate Reference System (CRS)</li>
</ul>
<p>Note that both <em>cell sizes</em>, and the <em>resolution of the values</em> in cells can, within reason, be converted to finer and coarser resolution. We will discuss these types of calculations next class.</p>
</section>
<section id="example-raster-1-create-frame" class="slide level2">
<h2>Example Raster 1 Create Frame</h2>
<p>Rasters tend to confuse people. We are going to create our own example here before we talk about them much more.</p>
</section>
<section id="example-raster-1-background" class="slide level2">
<h2>Example Raster 1 Background</h2>
<p>&lt; font size = ‘4’&gt; Fairy shrimp live in bodies of water which dry out in late Spring, and refill in early Fall. We seek to determine where suitable habitat for fairy shrimp are in the Great Basin. In order to do so, we will use satellite imagery to detect valleys which fill with water in Fall, and dry out in late Spring.</p>

<img data-src="../pictures/SurpriseValley_JohnathonGlen_USGS.jpg" style="width:85.0%" class="r-stretch quarto-figure-center"><p class="caption">Suprise Valley by: John Glen</p><p></p>
</section>
<section id="example-raster-1-a" class="slide level2">
<h2>Example Raster 1 A</h2>
<p>In the code above, we are going to define all four of the essential components of a raster. Clearly, we are defining three explicitly (Bounding Coordinates, Dimensions, CRS), and the remaining one implicitly (Cell resolution).</p>
</section>
<section id="example-raster-1-b" class="slide level2">
<h2>Example Raster 1 B</h2>

<img data-src="SDS_Day_1_slides_files/figure-revealjs/Create%20Empty%20Raster%20and%20Populate%20-%203%20with%20output-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"><p>We can imagine that the raster we are currently creating looks like this. A frame without content. We can see where the bounding coordinates are,</p>
</section>
<section id="example-raster-2-set-values" class="slide level2">
<h2>Example Raster 2 Set Values</h2>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top">
<caption>Example Matrix showing values underlaying a raster layer.</caption>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>I think it is easiest to imagine that the values within a raster are in the shape of a matrix. Hence, using the code above we could take a vector of values, and bend them, so that each position within the vector matches up with the beginning of a new row.</p>
</section>
<section id="example-raster-3" class="slide level2">
<h2>Example Raster 3</h2>
<div class="cell" data-layout-align="center">

<div class="cell-output cell-output-stdout">
<pre><code>The width of each raster cell is: 971.57627 meters
The height of each raster cell is: 965.38983 meters</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>This example_raster_dec contains: 13924 elements</code></pre>
</div>
</div>
<img data-src="SDS_Day_1_slides_files/figure-revealjs/Create%20Empty%20Raster%20and%20Populate%20-%208%20with%20output-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"></section></section>
<section>
<section id="raster-package---in-r" class="title-slide slide level1 center">
<h1>Raster Package - in R!</h1>
<ul>
<li>Does not need to load all files into active memory at once</li>
<li>Many functions ‘based’ on functions in ‘base’ R.</li>
</ul>
</section>
<section id="attributes" class="slide level2">
<h2>Attributes</h2>
<ul>
<li>Cells</li>
<li>Values</li>
</ul>
</section>
<section id="raster-layer" class="slide level2">
<h2>Raster Layer</h2>
<p>A single raster layer</p>
<h3 id="raster-stack">Raster Stack</h3>

<img data-src="SDS_Day_1_slides_files/figure-revealjs/Raster%20Stack-1.png" width="960" class="r-stretch"><p>The main use of Raster Stacks is to hold layers of similar themes.</p>
<p>Two usage examples:</p>
<ol type="1">
<li>Each layer is the same variable from a different time.<br>
</li>
</ol>
<ul>
<li>e.g.&nbsp;mean monthly temperature from January -&gt; December (12 layers per stack)</li>
</ul>
<ol start="2" type="1">
<li>Each layer is a different variable (theme) in an analysis.<br>
</li>
</ol>
<ul>
<li><p>e.g.&nbsp;yearly mean temperature, mean precipitation, etc.</p></li>
<li><p>Do not need be held in memory</p></li>
</ul>
<p><notes> In general these are rasters which have been classified and we want to extract values from or run calculations with. Now what is great about layers, is that we can do one big thing bricks cannot do, we can load in many layers from many files and create a stack of attributes we are interested in studying on the fly. </notes></p>
</section>
<section id="raster-brick" class="slide level2">
<h2>Raster Brick</h2>
<ul>
<li>Multiple bands of imagery held in the same file<br>
</li>
<li>The sensors of a camera, e.g.&nbsp;Red, Green, and Blue<br>
</li>
<li>Used for performing image classification to produce data raster layers<br>
</li>
<li>do not need to be held in memory</li>
</ul>
<p><notes></notes></p>
<p>As I have mentioned rasters are often generated from satellite imagery; we will discuss rasters which are not developed this way next lecture. Historically most pictures are imaged via the use of three bands. These having spectral values of Red, Green, and Blue (RGB) associated with them. For example our .tif file, is composed of three bands. Note that a Rasterbrick is most often used for loading in these types of imaging data, which can then be processed to form a more typical ‘raster’ data set.</p>
<p></p>

<img data-src="SDS_Day_1_slides_files/figure-revealjs/Raster%20Brick-1.png" width="960" class="r-stretch"></section></section>
<section id="terra" class="title-slide slide level1 center">
<h1>Terra</h1>
<ul>
<li>Developed by the same team as the Raster Package<br>
</li>
<li>Functionally virtually identical to Raster, but calculations run more quickly ! :-)<br>
</li>
<li>Rasterbricks/layers no longer need specification, all objects are Spatrasts<br>
</li>
<li>Will supersede Raster, but see points 1 &amp; 2.</li>
</ul>
</section>

<section>
<section id="cartography" class="title-slide slide level1 center">
<h1>Cartography</h1>
<ul>
<li><p>Focus on sf here<br>
</p></li>
<li><p>You have scripts to do many types of mapping in your course resources<br>
</p></li>
<li><p>sf objects are ggplot2 compliant<br>
</p></li>
<li><p>the order of mapping operations is more important than code</p></li>
<li><p>Import example data sets which come with two packages</p></li>
</ul>
</section>
<section id="read-in-sf-data" class="slide level2">
<h2>Read in sf data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href=""></a><span class="fu">data</span>(<span class="st">"us_states"</span>, <span class="at">package =</span> <span class="st">"spData"</span>) <span class="co"># lazy load</span></span>
<span id="cb7-2"><a href=""></a>us_states <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(us_states) <span class="co"># convert from sp to sf </span></span>
<span id="cb7-3"><a href=""></a></span>
<span id="cb7-4"><a href=""></a>north_carolina <span class="ot">&lt;-</span> <span class="fu">read_sf</span>( <span class="co"># read in vector data from disk. </span></span>
<span id="cb7-5"><a href=""></a>  <span class="fu">system.file</span>(<span class="st">"shape/nc.shp"</span>, <span class="at">package =</span> <span class="st">"sf"</span>)</span>
<span id="cb7-6"><a href=""></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="plot-borders-of-sf" class="slide level2">
<h2>Plot borders of sf</h2>
<ul>
<li>Map an sf object using their own geom ‘geom_sf’</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href=""></a><span class="fu">ggplot</span>(north_carolina) <span class="sc">+</span> </span>
<span id="cb8-2"><a href=""></a>  <span class="fu">geom_sf</span>() <span class="sc">+</span> </span>
<span id="cb8-3"><a href=""></a>  <span class="fu">theme_bw</span>() <span class="co"># we will use this theme for class, play around with others, but more</span></span>
<span id="cb8-4"><a href=""></a>  <span class="co"># miniminal themes tend to be the best. It's very easy to clutter maps. </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="SDS_Day_1_slides_files/figure-revealjs/sf%20with%20ggplot2%20-%202-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:75.0%"></section>
<section id="fill-sf-interiors" class="slide level2">
<h2>Fill sf interiors</h2>
<ul>
<li>Fill the interior of polygons by a variable</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9" data-code-line-numbers="2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href=""></a><span class="fu">ggplot</span>(north_carolina) <span class="sc">+</span></span>
<span id="cb9-2"><a href=""></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> BIR79))  <span class="sc">+</span> <span class="co"># fill the interior of polygons by a variable</span></span>
<span id="cb9-3"><a href=""></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="SDS_Day_1_slides_files/figure-revealjs/sf%20with%20ggplot2%20-%203-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:75.0%"></section>
<section id="colour-sf-borders-i" class="slide level2">
<h2>Colour sf borders I</h2>
<ul>
<li>Color the borders of each polygon in an sf object</li>
</ul>

<img data-src="SDS_Day_1_slides_files/figure-revealjs/sf%20with%20ggplot2%20-%204-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:75.0%"></section>
<section id="colour-sf-borders-ii" class="slide level2">
<h2>Colour sf borders II</h2>
<ul>
<li>Colour the border and remove any fill from the polygon interior</li>
</ul>

<img data-src="SDS_Day_1_slides_files/figure-revealjs/sf%20with%20ggplot2%20-%205a-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:75.0%"></section>
<section id="fill-interior-remove-borders" class="slide level2">
<h2>Fill interior remove borders</h2>
<ul>
<li>Colour the interior of polygons and remove the border</li>
<li>Can be useful to de-clutter maps</li>
</ul>

<img data-src="SDS_Day_1_slides_files/figure-revealjs/sf%20with%20ggplot2%20-%205b-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:75.0%"></section>
<section id="fill-interior-and-colour-borders" class="slide level2">
<h2>fill interior and colour borders</h2>
<ul>
<li>fill the interior of polygons and color the borders</li>
</ul>

<img data-src="SDS_Day_1_slides_files/figure-revealjs/sf%20with%20ggplot2%20-%206-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:75.0%"></section></section>
<section>
<section id="do-it-all-at-once" class="title-slide slide level1 center">
<h1>Do it all at once</h1>
<ul>
<li>all of this could also have been done as:</li>
</ul>

<img data-src="SDS_Day_1_slides_files/figure-revealjs/sf%20with%20ggplot2%20-%207-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:75.0%"></section>
<section id="multiple-sf-data-sets-on-one-map" class="slide level2">
<h2>Multiple sf data sets on one map</h2>
<ul>
<li>Use two data sets to create one map</li>
</ul>

<img data-src="SDS_Day_1_slides_files/figure-revealjs/sf%20with%20ggplot2%20-%208-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:75.0%"></section>
<section id="order-of-data-matters" class="slide level2">
<h2>order of data matters</h2>
<ul>
<li>Be diligent about the order of data sets</li>
</ul>

<img data-src="SDS_Day_1_slides_files/figure-revealjs/sf%20with%20ggplot2%20-%209-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:75.0%"></section>
<section id="build-plots-from-the-bottom-up" class="slide level2">
<h2>build plots from the bottom up</h2>
<ul>
<li>remember to build plots from the ‘bottom’ up</li>
</ul>

<img data-src="SDS_Day_1_slides_files/figure-revealjs/sf%20with%20ggplot2%20-%2010-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:75.0%"></section>
<section id="coord_sf" class="slide level2">
<h2>coord_sf</h2>
<ul>
<li>coord_sf is a helpful modifier to geom_sf</li>
<li>Can set a CRS for the map, modify extent, and change some rendering styles</li>
<li>remember: ‘?coord_sf’ for arguments!</li>
</ul>

<img data-src="SDS_Day_1_slides_files/figure-revealjs/sf%20with%20ggplot2%20-%2011-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:75.0%"></section>
<section id="crop-map-extent" class="slide level2">
<h2>crop map extent</h2>
<ul>
<li>clip the extent of a map using the bbox of the data set of interest</li>
</ul>

<img data-src="SDS_Day_1_slides_files/figure-revealjs/sf%20with%20ggplot2%20-%2012-1.png" class="quarto-figure quarto-figure-center r-stretch" style="width:75.0%"></section></section>
<section id="assignments-for-the-duration-of-the-spatial-data-science-module" class="title-slide slide level1 center">
<h1>Assignments for the Duration of the Spatial Data Science Module:</h1>
<p><strong>For next Lab: </strong></p>
<p><em>Please</em> install these packages (if you have not done so already):</p>
<p>Download the labs .R script from the course website.</p>
<p>If you are interested in how Drone/Lidar data are collected please check out the ‘RMBL Spatial Data Science Webinar Series’:</p>
<ul>
<li>https://github.com/ikb-rmbl/SpatialDataScienceWebinars2020</li>
<li>Collecting UAS Data (Video): https://youtu.be/Pq8btEZRCvM (1.25 hours)</li>
</ul>
<p><strong>For next Lecture:</strong> Assigned Reading: Chapter 3 of Spatial Data Science</p>
<p><strong>Future Bonus SDS Office Hours</strong> Wednesday Night at 5:00 - 6:00.</p>
<p><strong>Notes on this Lab</strong> My lecture notes are in the R script I used to generate all of the novel figures for this presentation. Likewise this presentation is an .HTML file and can be launched from your computer (it was rendered directly from R using the script).</p>
</section>

<section>
<section id="works-cited" class="title-slide slide level1 center">
<h1>Works Cited</h1>
<p>Krystalli, A. https://annakrystalli.me/intro-r-gis/gis.html Accessed 01.20.2022</p>
<p>https://geocompr.robinlovelace.net/spatial-class.html Accessed 01.09.2022</p>
<p>Hijman, R. 05.12.2019 ‘The raster Package’</p>
<p>https://rspatial.org/raster/RasterPackage.pdf Accessed 01.09.2022</p>
<p>https://www.neonscience.org/resources/learning-hub/tutorials/dc-multiband-rasters-r Accessed 01.19.2022</p>
<p>Pebesma, E. https://r-spatial.github.io/sf/articles/sf1.html Accessed 01.10.2022</p>
<p>https://proj.org/operations/conversions/geoc.html Accessed 01.20.2022.</p>
<p>https://rspatial.org/raster/spatial/8-rastermanip.html Accessed 01.11.2022</p>
<p>https://en.wikipedia.org/wiki/Open_Source_Geospatial_Foundation Accessed 01.09.2022</p>
<p>NOAA. What is geodesy? National Ocean Service website, https://oceanservice.noaa.gov/facts/geodesy.html, 1/25/17.</p>
<p>Geocomputation with R. Lovelace, R., Nowosad, J., Muenchow, J. 2022-01-25.</p>
</section>
<section id="packages-cited" class="slide level2">
<h2>Packages Cited:</h2>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[[1]]
Hijmans R (2024). _raster: Geographic Data Analysis and Modeling_. R
package version 3.6-30, &lt;https://CRAN.R-project.org/package=raster&gt;.

[[2]]
Pebesma E, Bivand R (2005). "Classes and methods for spatial data in
R." _R News_, *5*(2), 9-13. &lt;https://CRAN.R-project.org/doc/Rnews/&gt;.

Bivand R, Pebesma E, Gomez-Rubio V (2013). _Applied spatial data
analysis with R, Second edition_. Springer, NY.
&lt;https://asdar-book.org/&gt;.

[[3]]
Pebesma E, Bivand R (2023). _Spatial Data Science: With applications in
R_. Chapman and Hall/CRC. doi:10.1201/9780429459016
&lt;https://doi.org/10.1201/9780429459016&gt;, &lt;https://r-spatial.org/book/&gt;.

Pebesma E (2018). "Simple Features for R: Standardized Support for
Spatial Vector Data." _The R Journal_, *10*(1), 439-446.
doi:10.32614/RJ-2018-009 &lt;https://doi.org/10.32614/RJ-2018-009&gt;,
&lt;https://doi.org/10.32614/RJ-2018-009&gt;.

[[4]]
Wickham H, Averick M, Bryan J, Chang W, McGowan LD, François R,
Grolemund G, Hayes A, Henry L, Hester J, Kuhn M, Pedersen TL, Miller E,
Bache SM, Müller K, Ooms J, Robinson D, Seidel DP, Spinu V, Takahashi
K, Vaughan D, Wilke C, Woo K, Yutani H (2019). "Welcome to the
tidyverse." _Journal of Open Source Software_, *4*(43), 1686.
doi:10.21105/joss.01686 &lt;https://doi.org/10.21105/joss.01686&gt;.

[[5]]
Hijmans R (2024). _terra: Spatial Data Analysis_. R package version
1.7-83, &lt;https://CRAN.R-project.org/package=terra&gt;.</code></pre>
</div>
</div>

</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="../pictures/CBG_Logos/NegauneeInstitute_CBG-Logo-FlowerMark.png" class="slide-logo"></p>
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="SDS_Day_1_slides_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="SDS_Day_1_slides_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="SDS_Day_1_slides_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="SDS_Day_1_slides_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="SDS_Day_1_slides_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="SDS_Day_1_slides_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="SDS_Day_1_slides_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="SDS_Day_1_slides_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="SDS_Day_1_slides_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="SDS_Day_1_slides_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="SDS_Day_1_slides_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true,"boardmarkerWidth":5},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>